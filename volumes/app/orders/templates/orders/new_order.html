{% extends "accounts/dashboard_base.html" %}
{% load i18n %}
{% load static %}
{% load humanize %}
{% block title %} {% trans 'New Order' %} {% endblock %}
{% block panelcontent %}
<div class="row mt-4">
    <div class="col-lg-6 col-12">
        <form action="" method="POST" id="new_order_form" data-services-url="{% url 'services:service_list' %}"
            data-service-url="{% url 'services:service_desc' %}" novalidate>
            {% csrf_token %}
            <p class="fw-bold"><img src="{% static 'icons/StartHere.svg' %}" alt=""> {% trans 'Start Here' %}</p>
            {{ form.non_field_errors }}
            <div class="form-floating mt-2">
                {{ order_form.service_type }}
                <label for="{{ order_form.Service_type.id_for_label }}">{% trans 'Choose Service Type' %}:</label>
                {{ order_form.service_type.errors }}
            </div>
            <div class="form-floating mt-2">
                {{ order_form.service }}
                <label for="{{ order_form.service.id_for_label }}">{% trans 'Choose Service' %}:</label>
                {{ order_form.service.errors }}
            </div>
            <div class="form-floating mt-2">
                {{ order_form.link }}
                <label for="{{ id_link }}" class="d-none" id="post_link_label">{% trans 'Instagram Post/IGTV/Reel Link' %}:</label>
                <label for="{{ id_link }}" class="d-block" id="profile_link_label">{% trans 'Instagram Profile ID' %}:</label>
                <label for="{{ id_link }}" class="d-none" id="telegram_link_label">{% trans 'Telegram Link/ID' %}:</label>
                {{ order_form.link.errors }}
            </div>
            <div class="form-floating mt-2">
                {{ order_form.quantity }}
                <label for="id_quantity">{% trans 'Quantity' %}:</label>
                {{ order_form.quantity.errors }}
            </div>
            <div class="card border-0 bg-light p-2 mt-2">
                <div class="form-check mt-3 my-2 float-start p-0 g">
                    {{ order_form.use_wallet }}
                    <label class="form-check-label" for="flexCheckDefault">
                        استفاده از موجودی کیف پول - <small class="text-muted">{% trans "Credit" %}: {{ request.user.balance|intcomma }} {% trans "Toman" %}</small>
                    </label>
                    <div id="passwordHelpBlock" class="form-text">
                        با انتخاب این گزینه، اگر موجودی کیف پول شما کافی باشد، مبلغ از کیف پول کسر شده و مابقی به درگاه بانکی ارسال می‌شود.
                      </div>
                    {{ order_form.use_wallet.errors }}
                </div>
            </div>
            <div class="input-group mt-2">
                <div class="form-floating alert alert-warning" role="alert">
                    <span>{% trans "The number of requests" %}:&nbsp;<span id="total_number">--</span>&nbsp;{% trans "Number" %}</span>
                    <hr>
                    <span>{% trans "Final fee payable" %}:&nbsp;<span id="total_price">--</span>&nbsp;{% trans "Toman" %}</span>
                </div>
            </div>
            <div class="d-flex justify-content-around">
                <button type="submit" class="btn btn-warning btn-lg rounded-4 me-1" name="online_payment">
                    <span class="fs-6 fw-semibold">
                        <img src="{% static 'icons/card-tick.svg' %}" alt=""> {% trans 'Online Payment' %}</span><br>
                    <small class="text-muted">{% trans "Payment with all bank cards" %}</small>
                </button>
            </div>
        </form>
    </div>
    <div class="col-lg-6 col-12 mt-2 mt-lg-0">
        <p class="fw-bold"><img src="{% static 'icons/Info.svg' %}" alt=""> {% trans 'Product Specifications' %}</p>
        <div class="alert alert-light text-center d-block bg-transparent border-2" id="no-choice-product" role="alert">
            <small>{% trans "Please select a product" %}</small>
        </div>
        <div class="card p-3 border-0 d-none bg-transparent" id="product-spec-box">
            <div class="col">{% trans "Title of product" %}:
                <span id="title_service" class="fw-bold"></span>
            </div>
            <hr>
            <div>
                <span class="fs-6">{% trans "Order range between" %}</span>
                <span id="min_service" class="fw-bold"></span>
                <span>{% trans "to" %}</span>
                <span id="max_service" class="fw-bold"></span>
                <span>{% trans "Number" %}</span>
            </div>
            <hr>
            <div>
                {% trans "Price per 1" %}:
                <span id="price_per_unit_service" class="fw-bold"></span>
                {% trans "Toman" %}
            </div>
            <hr>
            <div class="row">
                <label for="desc_box" class="form-label">{% trans "Description" %}: </label>
                <div id="desc_box" class="fw-bold"></div>
            </div>
        </div>
    </div>
</div>

{% endblock panelcontent %}
